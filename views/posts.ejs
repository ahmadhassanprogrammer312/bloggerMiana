<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
<script src="https://kit.fontawesome.com/840f071354.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

<div>
<h1 class="text-white mt-5">Articles</h1>
</div>

<div class="p-5">
    <div class="row row-cols-1 row-cols-md-3 g-4">
        <% if(data.length > 0) { %>
            <% data.forEach(val => {%>
                <div class="col">
                    <div class="card h-100">
                        <img src="https://images.unsplash.com/photo-1720048171731-15b3d9d5473f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="...">
                        <div class="d-flex ml-3 mt-3 gap-1 align-items-center">
                            <div>

                                <img width="40px" height="40px" src="https://plus.unsplash.com/premium_photo-1689977968861-9c91dbb16049?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="rounded-circle shadow-4-strong" alt="Author Image">
                            </div>
                            <button class="bg-secondary text-white btn btn-sm">John Doe</button>
                            <% const days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];%>
                            <% const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]%>
                            <% d = new Date()%>
                            <button class="bg-secondary text-white btn btn-sm"><%= months[d.getMonth()] + " " + d.getDate() + "," + " " + d.getFullYear()%></button>
                            <button type="button" class="btn btn-outline-success btn-sm"><%=val.tags[0]%></button>                       
                        </div>
                        <div class="card-body">
                            <h5 class="card-title text-justify"><%=val.title.substring(0, 33)%>...</h5>
                            <p class="card-text text-justify"><%=val.body.substring(0, 135)%>.... </p>
                        </div>
                        <div class="d-flex justify-content-between">
                            <div class="tags d-flex  gap-1 px-3 py-0">
                                <%val.tags.forEach(tag => {%>
                                    <p class="tag bg-secondary px-1 rounded-lg text-white fs-6 fw-lighter"><%=tag%></p>
                                <%})%>
                            </div>
                            <div class="readMore  mr-3">
                                <button type="button" class="btn btn-dark btn-sm">Read more ... </button>
                            </div>
                        </div>
                        <div class="reactions d-flex justify-content-center gap-2 p-1 border-top ">
                            <div class="like">
                                <button class="btn btn-sm btn-info d-flex align-items-center gap-1">
                                    <i class="fa-regular fa-thumbs-up" style="font-size: 1.2rem;"></i>
                                    <span class="mb-0"><%=val.reactions.likes%></span>
                                </button>
                            </div>
                            <div class="dislike">
                                <button class="btn btn-sm btn-danger d-flex align-items-center gap-1">
                                    <i class="fa-regular fa-thumbs-down" style="font-size: 1.2rem;"></i>
                                    <span class="mb-0"><%=val.reactions.dislikes%></span>
                                </button>
                            </div>
                            <div class="share">
                                <button class="btn btn-sm btn-primary d-flex align-items-center gap-1">
                                    <i class="fa-solid fa-share-nodes" style="font-size: 1.2rem;"></i>
                                    <span class="mb-0"><%=val.views%></span>
                                </button>
                            </div>
                            <div class="views">
                                <button class="btn btn-sm btn-outline-primary d-flex align-items-center gap-1" disabled>
                                    <i class="fa-regular fa-eye" style="font-size: 1.2rem;"></i>
                                    <span class="mb-0"><%=val.views%></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            <% }) %>
        <% } %>
    </div>
    <style>
        .tag {
            cursor: pointer;
        }
    </style>
    <!-- Pagination -->
    <nav aria-label="Page navigation" class="mt-4">
        <ul class="pagination justify-content-center">
            <% if (hasPrevPage) { %>
                <li class="page-item">
                    <a class="page-link" href="/posts?page=<%= currentPage - 1 %>">Previous</a>
                </li>
            <% } %>

            <% for(let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= currentPage == i ? 'active' : '' %>">
                    <a class="page-link" href="/posts?page=<%= i %>"><%= i %></a>
                </li>
            <% } %>

            <% if (hasNextPage) { %>
                <li class="page-item">
                    <a class="page-link" href="/posts?page=<%= currentPage + 1 %>">Next</a>
                </li>
            <% } %>
        </ul>
    </nav>
</div>


<!-- <div class="p-5">

    <div class="row row-cols-1 row-cols-md-3 g-4">
        <% if(data.length > 0) { %>
            <% data.forEach(val => {%>
                <div class="col">
                    <div class="card h-100">
                      <img src="https://images.unsplash.com/photo-1720048171731-15b3d9d5473f?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="...">
                      <div class="card-body">
                        <h5 class="card-title"><%=val.title%></h5>
                        <p class="card-text"><%=val.body%></p>
                      </div>
                    </div>
                  </div>
            <%})%>
            <% } else { %>
                <h3>No tasks yet</h3>
            <% } %>

        
       
      </div>
</div> -->